<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>歷史資料</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://github.githubassets.com/favicons/favicon.png">
</head>
<body>
    <script>
        // 檢查是否有登入資訊：token、department、role 都必須存在
        if (!localStorage.getItem("token") || !localStorage.getItem("department") || !localStorage.getItem("role")) {
            alert("請先登入！");
            window.location.href = "indel.html";
        }
    </script>

  <!-- 右上角使用者資訊 -->
    <div id="userInfo" style="position: fixed; top: 10px; right: 10px; background: #f0f0f0; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
        <span id="userDetails"></span>
        <button onclick="logout()" style="margin-left: 10px;">登出</button>
    </div>
    
    <nav>
        <a href="history.html">歷史資料</a> |
        <a href="review.html">主管審核</a>
    </nav>
    <div class="container">
        <h2>歷史資料</h2>
        
        <!-- 下拉選單選擇 盤點、巡檢 或 異常處理 -->
        <label for="historyType">選擇類別：</label>
        <select id="historyType" onchange="loadHistory()">
            <option value="盤點">盤點</option>
            <option value="巡檢">巡檢</option>
            <option value="異常處理">異常處理</option>
        </select>
        
        <!-- 動態表格 -->
        <table>
            <thead id="tableHeader"></thead>
            <tbody id="historyTable"></tbody>
        </table>
    </div>

    <script src="script.js"></script>
    <script>loadHistory();</script>
</body>
</html>
